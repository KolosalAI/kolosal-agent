# Kolosal Agent System Configuration
system:
  name: "Kolosal Agent System"
  version: "1.0.0"
  host: "127.0.0.1"
  port: 8080
  log_level: "info"
  max_concurrent_requests: 100

# System instruction/prompt that will be used for all agents
system_instruction: |
  You are a helpful AI assistant that is part of the Kolosal Agent System. You have been designed to assist users with various tasks including:
  
  - Answering questions and providing information
  - Analyzing text and data
  - Helping with research and problem-solving
  - Providing explanations and tutorials
  - Assisting with creative tasks
  
  You should always:
  - Be helpful, accurate, and honest
  - Admit when you don't know something
  - Provide clear and well-structured responses
  - Be respectful and professional
  - Follow ethical guidelines
  
  Your responses should be informative and helpful while being concise when appropriate.

# Model configuration for agents - maps to Kolosal Server models
models:
  - name: "default"
    actual_name: "gemma3-1b"
    type: "llm"
    server_url: "http://127.0.0.1:8081"
    description: "Default LLM model (Gemma3-1B)"
    preload: true
    context_size: 4096
  
  - name: "gemma3-1b"
    actual_name: "gemma3-1b"
    type: "llm"
    server_url: "http://127.0.0.1:8081"
    description: "Gemma3-1B language model"
    preload: true
    context_size: 4096
  
  - name: "embedding"
    actual_name: "all-MiniLM-L6-v2-bf16-q4_k"
    type: "embedding"
    server_url: "http://127.0.0.1:8081"
    description: "Embedding model for document vectorization and semantic search"
    preload: true
    embedding_size: 384

# Default agents to create on startup
agents:
  - name: "Assistant"
    capabilities: ["chat", "analysis", "reasoning"]
    auto_start: true
    system_prompt: |
      You are an AI assistant specialized in general conversation and help. 
      You excel at answering questions, providing explanations, and helping users with various tasks.
      Be friendly, helpful, and informative in your responses.
  
  - name: "Analyzer" 
    capabilities: ["analysis", "data_processing", "summarization"]
    auto_start: true
    system_prompt: |
      You are an AI analyst specialized in text and data analysis.
      Your role is to examine, process, and summarize information effectively.
      Provide detailed analysis with clear insights and actionable conclusions.

  - name: "Researcher"
    capabilities: ["research", "web_search", "fact_checking"]
    auto_start: false
    system_prompt: |
      You are an AI researcher specialized in information gathering and fact-checking.
      Your role is to help users find accurate information and verify facts.
      Always cite sources when possible and present information objectively.

  - name: "RetrievalAgent"
    capabilities: ["retrieval", "document_management", "semantic_search", "knowledge_base", "vector_search"]
    auto_start: true
    system_prompt: |
      You are an AI agent specialized in information retrieval and document management.
      Your primary functions include:
      - Managing and organizing documents in a vector database
      - Performing semantic search across document collections
      - Retrieving relevant information based on user queries
      - Maintaining knowledge bases and document repositories
      - Providing context-aware responses using retrieved information
      
      You excel at finding relevant information quickly and accurately, 
      understanding document relationships, and presenting retrieved information 
      in a clear and organized manner. Always provide source references 
      when returning information from documents.

  - name: "DeepResearcher"
    capabilities: ["deep_research", "iterative_search", "fact_verification", "research_planning", "synthesis"]
    auto_start: false
    system_prompt: |
      You are an AI agent specialized in comprehensive deep research and analysis.
      Your primary functions include:
      - Planning multi-phase research strategies based on query complexity
      - Conducting iterative research with progressive refinement
      - Cross-validating information from multiple sources
      - Identifying research gaps and conducting targeted follow-up research
      - Synthesizing complex information from diverse sources
      - Fact-checking and source verification
      - Generating comprehensive research reports with proper citations
      
      You approach research systematically, ensuring thoroughness, accuracy, and 
      objectivity. You excel at breaking down complex topics into researchable 
      components and building comprehensive understanding through iterative investigation.

# Available functions that agents can execute
functions:
  chat:
    description: "Interactive chat functionality with AI model support"
    timeout: 30000
    parameters:
      - name: "message"
        type: "string"
        required: true
        description: "Message to send to the agent"
      - name: "model"
        type: "string"
        required: true
        description: "Name of the AI model to use for chat"
  
  analyze:
    description: "Text and data analysis functionality with optional AI assistance"
    timeout: 60000
    parameters:
      - name: "text"
        type: "string"
        required: true
        description: "Text to analyze"
      - name: "model"
        type: "string"
        required: false
        description: "Name of the AI model to use for enhanced analysis"
      - name: "analysis_type"
        type: "string"
        required: false
        description: "Type of analysis to perform (sentiment, summary, keywords, etc.)"
  
  research:
    description: "Research and information gathering"
    timeout: 120000
    parameters:
      - name: "query"
        type: "string"
        required: true
        description: "Research query or topic"
      - name: "depth"
        type: "string"
        required: false
        description: "Research depth (basic, detailed, comprehensive)"
  
  echo:
    description: "Echo function for testing"
    timeout: 5000
    parameters:
      - name: "data"
        type: "any"
        required: false
        description: "Data to echo back"
  
  status:
    description: "Agent status information"
    timeout: 5000
    parameters: []

  # Retrieval and document management functions
  add_document:
    description: "Add a document to the vector database for future retrieval"
    timeout: 60000
    parameters:
      - name: "content"
        type: "string"
        required: true
        description: "Document content to be indexed"
      - name: "title"
        type: "string"
        required: false
        description: "Document title or identifier"
      - name: "metadata"
        type: "object"
        required: false
        description: "Additional metadata for the document (tags, author, date, etc.)"
      - name: "chunk_size"
        type: "integer"
        required: false
        description: "Size of text chunks for vectorization (default: 512)"

  search_documents:
    description: "Search for documents using semantic similarity"
    timeout: 30000
    parameters:
      - name: "query"
        type: "string"
        required: true
        description: "Search query to find relevant documents"
      - name: "limit"
        type: "integer"
        required: false
        description: "Maximum number of results to return (default: 10)"
      - name: "threshold"
        type: "number"
        required: false
        description: "Minimum similarity score threshold (0.0-1.0)"
      - name: "filter"
        type: "object"
        required: false
        description: "Metadata filters to apply to the search"

  list_documents:
    description: "List all documents in the vector database"
    timeout: 30000
    parameters:
      - name: "offset"
        type: "integer"
        required: false
        description: "Number of documents to skip (for pagination)"
      - name: "limit"
        type: "integer"
        required: false
        description: "Maximum number of documents to return"
      - name: "filter"
        type: "object"
        required: false
        description: "Metadata filters to apply"

  remove_document:
    description: "Remove a document from the vector database"
    timeout: 30000
    parameters:
      - name: "id"
        type: "string"
        required: true
        description: "Document ID to remove"

  internet_search:
    description: "Search the internet for information"
    timeout: 60000
    parameters:
      - name: "query"
        type: "string"
        required: true
        description: "Search query for internet search"
      - name: "results"
        type: "integer"
        required: false
        description: "Number of search results to return (default: 10)"
      - name: "language"
        type: "string"
        required: false
        description: "Language for search results (default: en)"

  retrieve_and_answer:
    description: "Retrieve relevant documents and provide an AI-generated answer"
    timeout: 90000
    parameters:
      - name: "question"
        type: "string"
        required: true
        description: "Question to answer using retrieved documents"
      - name: "model"
        type: "string"
        required: true
        description: "AI model to use for generating the answer"
      - name: "max_docs"
        type: "integer"
        required: false
        description: "Maximum number of documents to retrieve for context"
      - name: "include_sources"
        type: "boolean"
        required: false
        description: "Whether to include source references in the answer"

  # Enhanced retrieval functions
  analyze_document:
    description: "Analyze document structure and extract metadata"
    timeout: 30000
    parameters:
      - name: "content"
        type: "string"
        required: true
        description: "Document content to analyze"

  batch_add_documents:
    description: "Add multiple documents to the vector database at once"
    timeout: 120000
    parameters:
      - name: "documents"
        type: "array"
        required: true
        description: "Array of documents to add (each with content and optional metadata)"

  organize_documents:
    description: "Organize documents by similarity clustering"
    timeout: 60000
    parameters:
      - name: "threshold"
        type: "number"
        required: false
        description: "Similarity threshold for clustering (0.0-1.0, default: 0.8)"
      - name: "max_clusters"
        type: "integer"
        required: false
        description: "Maximum number of clusters to create (default: 10)"

  extract_knowledge_graph:
    description: "Extract knowledge graph from a collection of documents"
    timeout: 90000
    parameters:
      - name: "documents"
        type: "array"
        required: true
        description: "Array of documents to analyze for knowledge extraction"

  get_search_suggestions:
    description: "Generate search query suggestions based on input"
    timeout: 10000
    parameters:
      - name: "query"
        type: "string"
        required: true
        description: "Base query to generate suggestions for"

  # Deep Research Functions
  plan_research:
    description: "Plan a comprehensive research strategy based on query complexity"
    timeout: 120000
    parameters:
      - name: "query"
        type: "string"
        required: true
        description: "Primary research question or topic"
      - name: "research_scope"
        type: "string"
        required: false
        description: "Scope of research (narrow, broad, comprehensive)"
      - name: "depth_level"
        type: "string"
        required: false
        description: "Research depth level (basic, intermediate, advanced, expert)"

  targeted_research:
    description: "Conduct focused research on specific aspects or gaps"
    timeout: 240000
    parameters:
      - name: "research_gaps"
        type: "array"
        required: true
        description: "List of specific topics or questions that need research"
      - name: "search_terms"
        type: "array"
        required: true
        description: "Specific search terms to use for targeted research"
      - name: "sources"
        type: "array"
        required: false
        description: "Preferred sources or domains to search"

  verify_facts:
    description: "Cross-validate and verify facts from multiple sources"
    timeout: 180000
    parameters:
      - name: "findings"
        type: "array"
        required: true
        description: "List of findings or claims to verify"
      - name: "sources"
        type: "array"
        required: true
        description: "Sources to use for verification"
      - name: "verification_depth"
        type: "string"
        required: false
        description: "Depth of verification (basic, thorough, comprehensive)"

  synthesize_research:
    description: "Synthesize information from multiple research sources and identify gaps"
    timeout: 180000
    parameters:
      - name: "primary_data"
        type: "object"
        required: true
        description: "Primary research data to synthesize"
      - name: "knowledge_base_data"
        type: "object"
        required: false
        description: "Additional data from knowledge base"
      - name: "synthesis_type"
        type: "string"
        required: false
        description: "Type of synthesis (comparative, thematic, chronological)"

  generate_research_report:
    description: "Generate comprehensive research report with citations"
    timeout: 120000
    parameters:
      - name: "research_data"
        type: "object"
        required: true
        description: "Compiled research data and findings"
      - name: "analysis_results"
        type: "object"
        required: true
        description: "Analysis results from deep analysis phase"
      - name: "report_format"
        type: "string"
        required: false
        description: "Format of the report (academic, business, summary, detailed)"
      - name: "include_citations"
        type: "boolean"
        required: false
        description: "Whether to include source citations"

  cross_reference_search:
    description: "Search across multiple databases and cross-reference results"
    timeout: 180000
    parameters:
      - name: "query"
        type: "string"
        required: true
        description: "Search query to cross-reference"
      - name: "databases"
        type: "array"
        required: false
        description: "List of databases to search (internet, knowledge_base, documents)"
      - name: "correlation_threshold"
        type: "number"
        required: false
        description: "Minimum correlation score for cross-referencing (0.0-1.0)"

  iterative_search_refinement:
    description: "Iteratively refine search based on previous results"
    timeout: 240000
    parameters:
      - name: "initial_query"
        type: "string"
        required: true
        description: "Initial search query"
      - name: "previous_results"
        type: "object"
        required: true
        description: "Results from previous search iterations"
      - name: "refinement_strategy"
        type: "string"
        required: false
        description: "Strategy for refinement (narrow, broaden, pivot, clarify)"

  source_credibility_analysis:
    description: "Analyze and score the credibility of information sources"
    timeout: 60000
    parameters:
      - name: "sources"
        type: "array"
        required: true
        description: "List of sources to analyze for credibility"
      - name: "criteria"
        type: "array"
        required: false
        description: "Criteria for credibility assessment"

# Performance and resource configuration
performance:
  max_memory_usage: "2GB"
  cache_size: "512MB"
  worker_threads: 4
  request_timeout: 30000
  max_request_size: "10MB"

# Kolosal Server configuration
kolosal_server:
  auto_start: true
  startup_timeout: 60
  health_check_interval: 10
  max_retries: 3
  retry_delay: 2000
  resource_limits:
    max_memory: "1.5GB"
    max_cpu_percent: 80
  models_directory: "./models"
  required_models:
    - "gemma3-1b"
    - "all-MiniLM-L6-v2-bf16-q4_k"
  model_preload_timeout: 120
  graceful_shutdown_timeout: 30

# Logging configuration
logging:
  level: "info"
  file: "agent_system.log"
  max_file_size: "100MB"
  max_files: 10
  console_output: true

# Security configuration
security:
  enable_cors: true
  allowed_origins: ["http://localhost:3000", "http://127.0.0.1:3000"]
  max_request_rate: 100  # requests per minute per IP
  enable_auth: false
  api_key: ""  # Set this if enable_auth is true

# Error handling and fallback configuration
error_handling:
  enable_fallbacks: true
  fallback_responses: true
  max_retry_attempts: 3
  retry_backoff_multiplier: 2.0
  timeout_escalation: true
  graceful_degradation: true
  offline_mode:
    enable: true
    cache_responses: true
    max_cache_size: "100MB"
  
# Circuit breaker configuration for server reliability
circuit_breaker:
  failure_threshold: 5
  recovery_timeout: 30
  half_open_max_calls: 3
  metrics_window: 60
