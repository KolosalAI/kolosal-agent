# Parallel Workflow Configuration
# This demonstrates parallel execution of multiple agents

id: "parallel_research_workflow"
name: "Parallel Research Workflow"
description: "Multiple agents researching different aspects of a topic simultaneously"
type: "parallel"
created_by: "system"

global_context:
  main_topic: "Artificial Intelligence"
  research_depth: "detailed"
  output_format: "json"

settings:
  max_execution_time: 300
  max_concurrent_steps: 4
  auto_cleanup: true
  persist_state: true

error_handling:
  retry_on_failure: true
  max_retries: 2
  retry_delay_seconds: 1
  continue_on_error: true  # Continue even if some parallel steps fail
  use_fallback_agent: false

steps:
  # All these steps run in parallel
  - id: "research_technical"
    name: "Technical Research"
    description: "Research technical aspects"
    agent_id: "research_analyst"
    function: "research_topic"
    parameters:
      topic: "${global.main_topic} - Technical Aspects"
      depth: "${global.research_depth}"
      sources: ["academic", "technical"]
    timeout: 120
    parallel_allowed: true

  - id: "research_business"
    name: "Business Research"
    description: "Research business implications"
    agent_id: "research_analyst"
    function: "research_topic"
    parameters:
      topic: "${global.main_topic} - Business Applications"
      depth: "${global.research_depth}"
      sources: ["industry", "business"]
    timeout: 120
    parallel_allowed: true

  - id: "research_ethical"
    name: "Ethical Research"
    description: "Research ethical considerations"
    agent_id: "research_analyst"
    function: "research_topic"
    parameters:
      topic: "${global.main_topic} - Ethics and Society"
      depth: "${global.research_depth}"
      sources: ["academic", "news"]
    timeout: 120
    parallel_allowed: true

  - id: "data_preparation"
    name: "Prepare Data Infrastructure"
    description: "Prepare data structures for analysis"
    agent_id: "task_executor"
    function: "execute_task"
    parameters:
      task_definition:
        action: "setup"
        setup_type: "data_structures"
        output_format: "${global.output_format}"
    timeout: 60
    parallel_allowed: true
