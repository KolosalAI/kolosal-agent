# Sequential Workflow Configuration  
# Simple Research Workflow - Single Agent Execution

# Workflow metadata
id: "simple_research_workflow"
name: "Simple Research and Analysis Workflow"
description: "A simplified sequential workflow using only the research_analyst agent"
type: "sequential"  # Options: sequential, parallel, pipeline, consensus, conditional
created_by: "research_system"

# Global context variables available to all steps
global_context:
  project_name: "Simple Research Analysis"
  research_question: "${input.research_question}"
  topic: "${input.topic}"
  research_focus: "${input.research_focus}"
  output_format: "comprehensive_report"
  max_tokens: 2048
  quality_threshold: 0.75

# Workflow execution settings
settings:
  max_execution_time: 300    # Maximum workflow execution time in seconds (5 minutes)
  max_concurrent_steps: 1    # Maximum steps that can run concurrently
  auto_cleanup: true         # Automatically clean up completed workflows
  persist_state: true        # Save workflow state for recovery

# Error handling strategy
error_handling:
  retry_on_failure: true      # Retry failed steps
  max_retries: 2              # Maximum retry attempts per step
  retry_delay_seconds: 3      # Delay between retries
  continue_on_error: false    # Stop workflow on step failure
  use_fallback_agent: true    # Use fallback agent if primary fails
  fallback_agent_id: "research_analyst"      # ID of fallback agent

# Single Agent Research Workflow Steps
steps:
  # Step 1: Topic Research
  - id: "topic_research"
    name: "Topic Research and Analysis"
    description: "Research the given topic and provide comprehensive analysis"
    agent_id: "research_analyst"
    function: "research_topic"
    parameters:
      topic: "${global.topic}"
      depth: "comprehensive"
      sources: ["academic", "expert", "recent"]
    timeout: 60
    max_retries: 2
    retry_delay: 3
    parallel_allowed: false
    continue_on_error: false

  # Step 2: Data Analysis
  - id: "data_analysis"
    name: "Research Data Analysis"
    description: "Analyze the researched data and extract key insights"
    agent_id: "research_analyst"
    function: "analyze_data"
    parameters:
      data_source: "${steps.topic_research.output}"
      analysis_type: "comprehensive"
      output_format: "structured"
    depends_on:
      - "topic_research"
    timeout: 45
    max_retries: 2
    retry_delay: 3
    parallel_allowed: false
    continue_on_error: false

  # Step 3: Information Synthesis
  - id: "information_synthesis"
    name: "Information Synthesis"
    description: "Synthesize research findings and analysis into coherent insights"
    agent_id: "research_analyst"
    function: "synthesize_information"
    parameters:
      sources: ["${steps.topic_research.output}", "${steps.data_analysis.output}"]
      synthesis_method: "comprehensive"
      conflict_resolution: "evidence_based"
    depends_on:
      - "data_analysis"
    timeout: 60
    max_retries: 2
    retry_delay: 3
    parallel_allowed: false
    continue_on_error: false

  # Step 4: Report Generation
  - id: "report_generation"
    name: "Research Report Generation"
    description: "Generate a comprehensive research report based on all findings"
    agent_id: "research_analyst"
    function: "generate_report"
    parameters:
      data: "${steps.information_synthesis.output}"
      format: "${global.output_format}"
      template: "research_analysis"
    depends_on:
      - "information_synthesis"
    timeout: 45
    max_retries: 2
    retry_delay: 3
    parallel_allowed: false
    continue_on_error: false
